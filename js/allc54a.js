Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:function(p,f){return new Uint8Array(Array.prototype.slice.call(this,p,f))}});Uint8Array.prototype.concat||Object.defineProperty(Uint8Array.prototype,"concat",{value:function(p){p=new Uint8Array(p);var f=new Uint8Array(this.length+p.length);f.set(this);f.set(p,this.length);return f}});
(function(p){"object"===typeof exports&&"undefined"!==typeof module?module.exports=p():"function"===typeof define&&define.amd?define([],p):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).jsmediatags=p()})(function(){return function f(k,n,m){function h(b,a){if(!n[b]){if(!k[b]){var e="function"==typeof require&&require;if(!a&&e)return e(b,!0);if(d)return d(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;}e=n[b]=
{exports:{}};k[b][0].call(e.exports,function(a){var g=k[b][1][a];return h(g?g:a)},e,e.exports,f,k,n,m)}return n[b].exports}for(var d="function"==typeof require&&require,c=0;c<m.length;c++)h(m[c]);return h}({1:[function(f,k,n){},{}],2:[function(f,k,n){k.exports=XMLHttpRequest},{}],3:[function(f,k,n){function m(d,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,
enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var h=function(){function d(c,b){for(var a=0;a<b.length;a++){var e=b[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(c,e.key,e)}}return function(c,b,a){b&&d(c.prototype,b);a&&d(c,a);return c}}();f=function(d){function c(b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var a;a=(c.__proto__||Object.getPrototypeOf(c)).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a._array=b;a._size=b.length;a._isInitialized=!0;return a}m(c,d);h(c,[{key:"init",value:function(b){setTimeout(b.onSuccess,0)}},{key:"loadRange",value:function(b,a){setTimeout(a.onSuccess,0)}},{key:"getByteAt",value:function(b){if(b>=this._array.length)throw Error("Offset "+b+" hasn't been loaded yet.");return this._array[b]}}],[{key:"canReadFile",value:function(b){return Array.isArray(b)||
"function"===typeof Buffer&&Buffer.isBuffer(b)}}]);return c}(f("./MediaFileReader"));k.exports=f},{"./MediaFileReader":11}],4:[function(f,k,n){function m(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var h=function(){function c(b,a){for(var e=
0;e<a.length;e++){var l=a[e];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(b,l.key,l)}}return function(b,a,e){a&&c(b.prototype,a);e&&c(b,e);return b}}(),d=f("./ChunkedFileData");f=function(c){function b(a){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var e;e=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");e=!e||"object"!==
typeof e&&"function"!==typeof e?this:e;e._blob=a;e._fileData=new d;return e}m(b,c);h(b,[{key:"_init",value:function(a){this._size=this._blob.size;setTimeout(a.onSuccess,1)}},{key:"loadRange",value:function(a,e){var l=this,g=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,a[0],a[1]+1),b=new FileReader;b.onloadend=function(g){g=new Uint8Array(b.result);l._fileData.addData(a[0],g);e.onSuccess()};b.onerror=b.onabort=function(g){if(e.onError)e.onError({type:"blob",info:b.error})};
b.readAsArrayBuffer(g)}},{key:"getByteAt",value:function(a){return this._fileData.getByteAt(a)}}],[{key:"canReadFile",value:function(a){return"undefined"!==typeof Blob&&a instanceof Blob||"undefined"!==typeof File&&a instanceof File}}]);return b}(f("./MediaFileReader"));k.exports=f},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(f,k,n){var m=function(){function f(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(d,
a.key,a)}}return function(d,c,b){c&&f(d.prototype,c);b&&f(d,b);return d}}();f=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._fileData=[]}m(f,null,[{key:"NOT_FOUND",get:function(){return-1}}]);m(f,[{key:"addData",value:function(d,c){var b=d+c.length-1,a=this._getChunkRange(d,b);if(-1===a.startIx)this._fileData.splice(a.insertIx||0,0,{offset:d,data:c});else{var e=this._fileData[a.startIx],l=this._fileData[a.endIx],g=d>e.offset,b=b<l.offset+
l.data.length-1,t={offset:Math.min(d,e.offset),data:c};g&&(e=this._sliceData(e.data,0,d-e.offset),t.data=this._concatData(e,c));b&&(e=this._sliceData(t.data,0,l.offset-t.offset),t.data=this._concatData(e,l.data));this._fileData.splice(a.startIx,a.endIx-a.startIx+1,t)}}},{key:"_concatData",value:function(d,c){if("undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(d)){var b=new d.constructor(d.length+c.length);b.set(d,0);b.set(c,d.length);return b}return d.concat(c)}},{key:"_sliceData",
value:function(d,c,b){return d.slice?d.slice(c,b):d.subarray(c,b)}},{key:"_getChunkRange",value:function(d,c){for(var b=-1,a=-1,e=0,l=0;l<this._fileData.length;l++,e=l){var g=this._fileData[l].offset,t=g+this._fileData[l].data.length;if(c<g-1)break;if(d<=t+1&&c>=g-1){b=l;break}}if(-1===b)return{startIx:-1,endIx:-1,insertIx:e};for(l=b;l<this._fileData.length&&!(g=this._fileData[l].offset,t=g+this._fileData[l].data.length,c>=g-1&&(a=l),c<=t+1);l++);-1===a&&(a=b);return{startIx:b,endIx:a}}},{key:"hasDataRange",
value:function(d,c){for(var b=0;b<this._fileData.length;b++){var a=this._fileData[b];if(c<a.offset)break;if(d>=a.offset&&c<a.offset+a.data.length)return!0}return!1}},{key:"getByteAt",value:function(d){for(var c,b=0;b<this._fileData.length;b++){var a=this._fileData[b].offset,e=a+this._fileData[b].data.length-1;if(d>=a&&d<=e){c=this._fileData[b];break}}if(c)return c.data[d-c.offset];throw Error("Offset "+d+" hasn't been loaded yet.");}}]);return f}();k.exports=f},{}],6:[function(f,k,n){function m(a,
e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});e&&(Object.setPrototypeOf?Object.setPrototypeOf(a,e):a.__proto__=e)}var h=function(){function a(a,l){for(var g=0;g<l.length;g++){var b=l[g];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(a,b.key,b)}}return function(e,
b,g){b&&a(e.prototype,b);g&&a(e,g);return e}}(),d=[4,132],c=[6,134],b="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");f=function(a){function e(){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");var a=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}m(e,a);h(e,[{key:"_loadData",value:function(a,g){var e=this;a.loadRange([4,7],{onSuccess:function(){e._loadBlock(a,4,g)}})}},{key:"_loadBlock",value:function(a,g,e){var b=this,f=a.getByteAt(g),s=a.getInteger24At(g+1,!0);
if(-1!==d.indexOf(f)){var r=g+4;a.loadRange([r,r+s],{onSuccess:function(){b._commentOffset=r;b._nextBlock(a,g,f,s,e)}})}else-1!==c.indexOf(f)?(r=g+4,a.loadRange([r,r+s],{onSuccess:function(){b._pictureOffset=r;b._nextBlock(a,g,f,s,e)}})):b._nextBlock(a,g,f,s,e)}},{key:"_nextBlock",value:function(a,g,e,b,c){var d=this;if(127<e)if(d._commentOffset)c.onSuccess();else c.onError({type:"loadData",info:"Comment block could not be found."});else a.loadRange([g+4+b,g+4+4+b],{onSuccess:function(){d._loadBlock(a,
g+4+b,c)}})}},{key:"_parseData",value:function(a,g){for(var e=a.getLongAt(this._commentOffset,!1)+(this._commentOffset+4),c=a.getLongAt(e,!1),e=e+4,d,f,r,q,h,k,m=0;m<c;m++){var n=a.getLongAt(e,!1),v=a.getStringWithCharsetAt(e+4,n,"utf-8").toString(),w=v.indexOf("="),v=[v.slice(0,w),v.slice(w+1)];switch(v[0]){case "TITLE":d=v[1];break;case "ARTIST":f=v[1];break;case "ALBUM":r=v[1];break;case "TRACKNUMBER":q=v[1];break;case "GENRE":h=v[1]}e+=4+n}this._pictureOffset&&(c=a.getLongAt(this._pictureOffset,
!0),k=this._pictureOffset+4,e=a.getLongAt(k,!0),m=k+4,k=a.getStringAt(m,e),e=m+e,m=a.getLongAt(e,!0),n=e+4,e=a.getStringWithCharsetAt(n,m,"utf-8").toString(),m=n+m+16,n=a.getLongAt(m,!0),m=a.getBytesAt(m+4,n,!0),k={format:k,type:b[c],description:e,data:m});return{type:"FLAC",version:"1",tags:{title:d,artist:f,album:r,track:q,genre:h,picture:k}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(a){return"fLaC"===String.fromCharCode.apply(String,
a.slice(0,4))}}]);return e}(f("./MediaTagReader"));k.exports=f},{"./MediaTagReader":12}],7:[function(f,k,n){function m(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var h=function(){function c(b,a){for(var e=0;e<a.length;e++){var c=a[e];c.enumerable=
c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(b,c.key,c)}}return function(b,a,e){a&&c(b.prototype,a);e&&c(b,e);return b}}();n=f("./MediaTagReader");f("./MediaFileReader");f=function(c){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==
typeof a&&"function"!==typeof a?this:a}m(b,c);h(b,[{key:"_loadData",value:function(a,e){var b=a.getSize();a.loadRange([b-128,b-1],e)}},{key:"_parseData",value:function(a,e){var b=a.getSize()-128,g=a.getStringWithCharsetAt(b+3,30).toString(),c=a.getStringWithCharsetAt(b+33,30).toString(),u=a.getStringWithCharsetAt(b+63,30).toString(),f=a.getStringWithCharsetAt(b+93,4).toString(),s=a.getByteAt(b+97+28),r=a.getByteAt(b+97+29);if(0==s&&0!=r)var s="1.1",q=a.getStringWithCharsetAt(b+97,28).toString();else s=
"1.0",q=a.getStringWithCharsetAt(b+97,30).toString(),r=0;b=a.getByteAt(b+97+30);g={type:"ID3",version:s,tags:{title:g,artist:c,album:u,year:f,comment:q,genre:255>b?d[b]:""}};r&&(g.tags.track=r);return g}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(a){return"TAG"===String.fromCharCode.apply(String,a.slice(0,3))}}]);return b}(n);var d="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");
k.exports=f},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(f,k,n){function m(a){switch(a){case 0:a="iso-8859-1";break;case 1:a="utf-16";break;case 2:a="utf-16be";break;case 3:a="utf-8";break;default:a="iso-8859-1"}return a}function h(a,e,b,c){c=b.getStringWithCharsetAt(a+1,e-1,c);a=b.getStringWithCharsetAt(a+1+c.bytesReadCount,e-1-c.bytesReadCount);return{user_description:c.toString(),data:a.toString()}}var d=function(){function a(g,e){for(var b=0;b<e.length;b++){var c=e[b];c.enumerable=
c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(g,c.key,c)}}return function(b,e,c){e&&a(b.prototype,e);c&&a(b,c);return b}}();f("./MediaFileReader");var c=f("./StringUtils"),b=f("./ArrayFileReader"),a={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",
MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",
TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",
TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",
CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",
RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",
TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",
TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",
UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};f=function(){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");
}d(g,null,[{key:"getFrameReaderFunction",value:function(a){return a in e?e[a]:"T"===a[0]?e["T*"]:"W"===a[0]?e["W*"]:null}},{key:"readFrames",value:function(a,b,e,c,l){for(var d={},f=this._getFrameHeaderSize(c);a<b-f;){var h=this._readFrameHeader(e,a,c),k=h.id;if(!k)break;var m=h.flags,n=h.size,w=a+h.headerSize,y=e;a+=h.headerSize+h.size;if(!l||-1!==l.indexOf(k)){if("MP3e"===k||"\x00MP3"===k||"\x00\x00MP"===k||" MP3"===k)break;m&&m.format.unsynchronisation&&(y=this.getUnsyncFileReader(y,w,n),w=0,n=
y.getSize());m&&m.format.data_length_indicator&&(w+=4,n-=4);m=(h=g.getFrameReaderFunction(k))?h.apply(this,[w,n,y,m,c]):null;w=this._getFrameDescription(k);n={id:k,size:n,description:w,data:m};k in d?(d[k].id&&(d[k]=[d[k]]),d[k].push(n)):d[k]=n}}return d}},{key:"_getFrameHeaderSize",value:function(a){a=a.major;return 2==a?6:3==a||4==a?10:0}},{key:"_readFrameHeader",value:function(a,g,b){var e=b.major,c=null;b=this._getFrameHeaderSize(b);switch(e){case 2:var l=a.getStringAt(g,3),d=a.getInteger24At(g+
3,!0);break;case 3:l=a.getStringAt(g,4);d=a.getLongAt(g+4,!0);break;case 4:l=a.getStringAt(g,4),d=a.getSynchsafeInteger32At(g+4)}if(l==String.fromCharCode(0,0,0)||l==String.fromCharCode(0,0,0,0))l="";l&&2<e&&(c=this._readFrameFlags(a,g+8));return{id:l||"",size:d||0,headerSize:b||0,flags:c}}},{key:"_readFrameFlags",value:function(a,g){return{message:{tag_alter_preservation:a.isBitSetAt(g,6),file_alter_preservation:a.isBitSetAt(g,5),read_only:a.isBitSetAt(g,4)},format:{grouping_identity:a.isBitSetAt(g+
1,7),compression:a.isBitSetAt(g+1,3),encryption:a.isBitSetAt(g+1,2),unsynchronisation:a.isBitSetAt(g+1,1),data_length_indicator:a.isBitSetAt(g+1,0)}}}},{key:"_getFrameDescription",value:function(g){return g in a?a[g]:"Unknown"}},{key:"getUnsyncFileReader",value:function(a,g,e){a=a.getBytesAt(g,e);for(g=0;g<a.length-1;g++)255===a[g]&&0===a[g+1]&&a.splice(g+1,1);return new b(a)}}]);return g}();var e={APIC:function(a,b,e,c,d){c=a;var f=m(e.getByteAt(a));switch(d&&d.major){case 2:d=e.getStringAt(a+1,
3);a+=4;break;case 3:case 4:d=e.getStringWithCharsetAt(a+1,b-1);a+=1+d.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.");}var q=e.getByteAt(a),q=l[q],f=e.getStringWithCharsetAt(a+1,b-(a-c)-1,f);a+=1+f.bytesReadCount;return{format:d.toString(),type:q,description:f.toString(),data:e.getBytesAt(a,c+b-a)}},CHAP:function(a,e,b,l,d){l=a;var f={},q=c.readNullTerminatedString(b.getBytesAt(a,e));f.id=q.toString();a+=q.bytesReadCount;f.startTime=b.getLongAt(a,!0);a+=4;f.endTime=
b.getLongAt(a,!0);a+=4;f.startOffset=b.getLongAt(a,!0);a+=4;f.endOffset=b.getLongAt(a,!0);a+=4;f.subFrames=this.readFrames(a,a+(e-(a-l)),b,d);return f},CTOC:function(a,b,e,l,d){l=a;var f={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},q=c.readNullTerminatedString(e.getBytesAt(a,b));f.id=q.toString();a+=q.bytesReadCount;f.topLevel=e.isBitSetAt(a,1);f.ordered=e.isBitSetAt(a,0);a++;f.entryCount=e.getByteAt(a);a++;for(q=0;q<f.entryCount;q++){var k=c.readNullTerminatedString(e.getBytesAt(a,
b-(a-l)));f.childElementIds.push(k.toString());a+=k.bytesReadCount}f.subFrames=this.readFrames(a,a+(b-(a-l)),e,d);return f},COMM:function(a,e,b,c,l){var d=a,f=m(b.getByteAt(a));c=b.getStringAt(a+1,3);l=b.getStringWithCharsetAt(a+4,e-4,f);a+=4+l.bytesReadCount;a=b.getStringWithCharsetAt(a,d+e-a,f);return{language:c,short_description:l.toString(),text:a.toString()}}};e.COM=e.COMM;e.PIC=function(a,b,c,l,d){return e.APIC(a,b,c,l,d)};e.PCNT=function(a,b,e,c,l){return e.getLongAt(a,!1)};e.CNT=e.PCNT;e["T*"]=
function(a,b,e,c,l){c=m(e.getByteAt(a));return e.getStringWithCharsetAt(a+1,b-1,c).toString()};e.TXXX=function(a,b,e,c,l){c=m(e.getByteAt(a));return h(a,b,e,c)};e.WXXX=function(a,e,b,c,l){if(0===e)return null;c=m(b.getByteAt(a));return h(a,e,b,c)};e["W*"]=function(a,e,b,c,l){return 0===e?null:b.getStringWithCharsetAt(a,e,"iso-8859-1").toString()};e.TCON=function(a,b,c,l){return e["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")};e.TCO=e.TCON;e.USLT=function(a,e,b,c,l){var d=a,f=m(b.getByteAt(a));
c=b.getStringAt(a+1,3);l=b.getStringWithCharsetAt(a+4,e-4,f);a+=4+l.bytesReadCount;a=b.getStringWithCharsetAt(a,d+e-a,f);return{language:c,descriptor:l.toString(),lyrics:a.toString()}};e.ULT=e.USLT;e.UFID=function(a,b,e,l,d){l=c.readNullTerminatedString(e.getBytesAt(a,b));a+=l.bytesReadCount;a=e.getBytesAt(a,b-l.bytesReadCount);return{ownerIdentifier:l.toString(),identifier:a}};var l="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");
k.exports=f},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(f,k,n){function m(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var h=function(){function b(a,b){for(var c=0;c<b.length;c++){var g=b[c];g.enumerable=g.enumerable||
!1;g.configurable=!0;"value"in g&&(g.writable=!0);Object.defineProperty(a,g.key,g)}}return function(a,e,c){e&&b(a.prototype,e);c&&b(a,c);return a}}();n=f("./MediaTagReader");f("./MediaFileReader");var d=f("./ID3v2FrameReader");f=function(b){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");var b=(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||
"object"!==typeof b&&"function"!==typeof b?this:b}m(a,b);h(a,[{key:"_loadData",value:function(a,b){a.loadRange([6,9],{onSuccess:function(){a.loadRange([0,10+a.getSynchsafeInteger32At(6)-1],b)},onError:b.onError})}},{key:"_parseData",value:function(a,b){var g=0,f=a.getByteAt(g+3);if(4<f)return{type:"ID3",version:">2.4",tags:{}};var k=a.getByteAt(g+4),h=a.isBitSetAt(g+5,7),m=a.isBitSetAt(g+5,6),r=a.isBitSetAt(g+5,5),q=a.getSynchsafeInteger32At(g+6),g=g+10;if(m)if(4===f)var n=a.getSynchsafeInteger32At(g),
g=g+n;else n=a.getLongAt(g,!0),g+=n+4;f={type:"ID3",version:"2."+f+"."+k,major:f,revision:k,flags:{unsynchronisation:h,extended_header:m,experimental_indicator:r,footer_present:!1},size:q,tags:{}};if(b)var B=this._expandShortcutTags(b);k=q+10;f.flags.unsynchronisation&&(a=d.getUnsyncFileReader(a,g,q),g=0,k=a.getSize());var g=d.readFrames(g,k,a,f,B),x;for(x in c)c.hasOwnProperty(x)&&(q=this._getFrameData(g,c[x]))&&(f.tags[x]=q);for(var z in g)g.hasOwnProperty(z)&&(f.tags[z]=g[z]);return f}},{key:"_getFrameData",
value:function(a,b){var c;c=0;for(var d;d=b[c];c++)if(d in a)return c=a[d]instanceof Array?a[d][0]:a[d],c.data}},{key:"getShortcuts",value:function(){return c}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(a){return"ID3"===String.fromCharCode.apply(String,a.slice(0,3))}}]);return a}(n);var c={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON",
"TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};k.exports=f},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(f,k,n){function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,g){c&&a(b.prototype,c);g&&a(b,g);return b}}();n=f("./MediaTagReader");f("./MediaFileReader");f=function(a){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var a=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}m(e,a);h(e,[{key:"_loadData",value:function(a,b){var c=this;a.loadRange([0,16],{onSuccess:function(){c._loadAtom(a,0,"",b)},onError:b.onError})}},{key:"_loadAtom",value:function(a,b,c,e){if(b>=a.getSize())e.onSuccess();else{var d=this,f=a.getLongAt(b,!0);if(0==f||isNaN(f))e.onSuccess();else{var k=a.getStringAt(b+4,4);if(this._isContainerAtom(k)){"meta"==k&&(b+=4);var q=(c?c+".":"")+k;"moov.udta.meta.ilst"===q?a.loadRange([b,b+f],e):a.loadRange([b+
8,b+8+8],{onSuccess:function(){d._loadAtom(a,b+8,q,e)},onError:e.onError})}else a.loadRange([b+f,b+f+8],{onSuccess:function(){d._loadAtom(a,b+f,c,e)},onError:e.onError})}}}},{key:"_isContainerAtom",value:function(a){return 0<=["moov","udta","meta","ilst"].indexOf(a)}},{key:"_canReadAtom",value:function(a){return"----"!==a}},{key:"_parseData",value:function(a,c){var e={};c=this._expandShortcutTags(c);this._readAtom(e,a,0,a.getSize(),c);for(var d in b)if(b.hasOwnProperty(d)){var f=e[b[d]];f&&(e[d]=
"track"===d?f.data.track:f.data)}return{type:"MP4",ftyp:a.getStringAt(8,4),version:a.getLongAt(12,!0),tags:e}}},{key:"_readAtom",value:function(a,b,c,e,d,f,k){k=void 0===k?"":k+"  ";for(var q=c;q<c+e;){var h=b.getLongAt(q,!0);if(0==h)break;var m=b.getStringAt(q+4,4);if(this._isContainerAtom(m)){"meta"==m&&(q+=4);this._readAtom(a,b,q+8,h-8,d,(f?f+".":"")+m,k);break}(!d||0<=d.indexOf(m))&&"moov.udta.meta.ilst"===f&&this._canReadAtom(m)&&(a[m]=this._readMetadataAtom(b,q));q+=h}}},{key:"_readMetadataAtom",
value:function(a,b){var e=a.getLongAt(b,!0),f=a.getStringAt(b+4,4),k=a.getInteger24At(b+16+1,!0),k=d[k],h;if("trkn"==f)h={track:a.getByteAt(b+16+11),total:a.getByteAt(b+16+13)};else if("disk"==f)h={disk:a.getByteAt(b+16+11),total:a.getByteAt(b+16+13)};else{var m=b+24,q=e-24;"covr"===f&&"uint8"===k&&(k="jpeg");switch(k){case "text":h=a.getStringWithCharsetAt(m,q,"utf-8").toString();break;case "uint8":h=a.getShortAt(m,!1);break;case "int":case "uint":h=("int"==k?1==q?a.getSByteAt:2==q?a.getSShortAt:
4==q?a.getSLongAt:a.getLongAt:1==q?a.getByteAt:2==q?a.getShortAt:a.getLongAt).call(a,m+(8==q?4:0),!0);break;case "jpeg":case "png":h={format:"image/"+k,data:a.getBytesAt(m,q)}}}return{id:f,size:e,description:c[f]||"Unknown",data:h}}},{key:"getShortcuts",value:function(){return b}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(a){return"ftyp"===String.fromCharCode.apply(String,a.slice(4,8))}}]);return e}(n);var d={0:"uint8",
1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},c={"\u00a9alb":"Album","\u00a9ART":"Artist",aART:"Album Artist","\u00a9day":"Release Date","\u00a9nam":"Title","\u00a9gen":"Genre",gnre:"Genre",trkn:"Track Number","\u00a9wrt":"Composer","\u00a9too":"Encoding Tool","\u00a9enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","\u00a9grp":"Grouping",keyw:"Keywords","\u00a9lyr":"Lyrics","\u00a9cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",
tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},b={title:"\u00a9nam",
artist:"\u00a9ART",album:"\u00a9alb",year:"\u00a9day",comment:"\u00a9cmt",track:"trkn",genre:"\u00a9gen",picture:"covr",lyrics:"\u00a9lyr"};k.exports=f},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(f,k,n){var m=function(){function d(c,b){for(var a=0;a<b.length;a++){var e=b[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(c,e.key,e)}}return function(c,b,a){b&&d(c.prototype,b);a&&d(c,a);return c}}(),h=f("./StringUtils");f=function(){function d(c){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");this._isInitialized=!1;this._size=0}m(d,[{key:"init",value:function(c){var b=this;if(this._isInitialized)setTimeout(c.onSuccess,1);else return this._init({onSuccess:function(){b._isInitialized=!0;c.onSuccess()},onError:c.onError})}},{key:"_init",value:function(c){throw Error("Must implement init function");}},{key:"loadRange",value:function(c,b){throw Error("Must implement loadRange function");}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");
return this._size}},{key:"getByteAt",value:function(c){throw Error("Must implement getByteAt function");}},{key:"getBytesAt",value:function(c,b){for(var a=Array(b),e=0;e<b;e++)a[e]=this.getByteAt(c+e);return a}},{key:"isBitSetAt",value:function(c,b){return 0!=(this.getByteAt(c)&1<<b)}},{key:"getSByteAt",value:function(c){c=this.getByteAt(c);return 127<c?c-256:c}},{key:"getShortAt",value:function(c,b){var a=b?(this.getByteAt(c)<<8)+this.getByteAt(c+1):(this.getByteAt(c+1)<<8)+this.getByteAt(c);0>a&&
(a+=65536);return a}},{key:"getSShortAt",value:function(c,b){var a=this.getShortAt(c,b);return 32767<a?a-65536:a}},{key:"getLongAt",value:function(c,b){var a=this.getByteAt(c),e=this.getByteAt(c+1),d=this.getByteAt(c+2),g=this.getByteAt(c+3),a=b?(((a<<8)+e<<8)+d<<8)+g:(((g<<8)+d<<8)+e<<8)+a;0>a&&(a+=4294967296);return a}},{key:"getSLongAt",value:function(c,b){var a=this.getLongAt(c,b);return 2147483647<a?a-4294967296:a}},{key:"getInteger24At",value:function(c,b){var a=this.getByteAt(c),e=this.getByteAt(c+
1),d=this.getByteAt(c+2),a=b?((a<<8)+e<<8)+d:((d<<8)+e<<8)+a;0>a&&(a+=16777216);return a}},{key:"getStringAt",value:function(c,b){for(var a=[],e=c,d=0;e<c+b;e++,d++)a[d]=String.fromCharCode(this.getByteAt(e));return a.join("")}},{key:"getStringWithCharsetAt",value:function(c,b,a){c=this.getBytesAt(c,b);switch((a||"").toLowerCase()){case "utf-16":case "utf-16le":case "utf-16be":a=h.readUTF16String(c,"utf-16be"===a);break;case "utf-8":a=h.readUTF8String(c);break;default:a=h.readNullTerminatedString(c)}return a}},
{key:"getCharAt",value:function(c){return String.fromCharCode(this.getByteAt(c))}},{key:"getSynchsafeInteger32At",value:function(c){var b=this.getByteAt(c),a=this.getByteAt(c+1),e=this.getByteAt(c+2);return this.getByteAt(c+3)&127|(e&127)<<7|(a&127)<<14|(b&127)<<21}}],[{key:"canReadFile",value:function(c){throw Error("Must implement canReadFile function");}}]);return d}();k.exports=f},{"./StringUtils":13}],12:[function(f,k,n){var m=function(){function f(d,c){for(var b=0;b<c.length;b++){var a=c[b];
a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(d,a.key,a)}}return function(d,c,b){c&&f(d.prototype,c);b&&f(d,b);return d}}();f("./MediaFileReader");f=function(){function f(d){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this._mediaFileReader=d;this._tags=null}m(f,[{key:"setTagsToRead",value:function(d){this._tags=d;return this}},{key:"read",value:function(d){var c=this;this._mediaFileReader.init({onSuccess:function(){c._loadData(c._mediaFileReader,
{onSuccess:function(){try{var b=c._parseData(c._mediaFileReader,c._tags)}catch(a){if(d.onError){d.onError({type:"parseData",info:a.message});return}}d.onSuccess(b)},onError:d.onError})},onError:d.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(d,c){throw Error("Must implement _loadData function");}},{key:"_parseData",value:function(d,c){throw Error("Must implement _parseData function");}},{key:"_expandShortcutTags",value:function(d){if(!d)return null;for(var c=
[],b=this.getShortcuts(),a=0,e;e=d[a];a++)c=c.concat(b[e]||[e]);return c}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement");}},{key:"canReadTagFormat",value:function(d){throw Error("Must implement");}}]);return f}();k.exports=f},{"./MediaFileReader":11}],13:[function(f,k,n){var m=function(){function d(c,b){for(var a=0;a<b.length;a++){var e=b[a];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(c,e.key,e)}}return function(c,
b,a){b&&d(c.prototype,b);a&&d(c,a);return c}}(),h=function(){function d(c,b){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this._value=c;this.bytesReadCount=b;this.length=c.length}m(d,[{key:"toString",value:function(){return this._value}}]);return d}();k.exports={readUTF16String:function(d,c,b){var a=0,e=1,l=0;b=Math.min(b||d.length,d.length);254==d[0]&&255==d[1]?(c=!0,a=2):255==d[0]&&254==d[1]&&(c=!1,a=2);c&&(e=0,l=1);c=[];for(var g=0;a<b;g++){var f=d[a+e],k=(f<<
8)+d[a+l],a=a+2;if(0==k)break;else 216>f||224<=f?c[g]=String.fromCharCode(k):(f=(d[a+e]<<8)+d[a+l],a+=2,c[g]=String.fromCharCode(k,f))}return new h(c.join(""),a)},readUTF8String:function(d,c){var b=0;c=Math.min(c||d.length,d.length);239==d[0]&&187==d[1]&&191==d[2]&&(b=3);for(var a=[],e=0;b<c;e++){var l=d[b++];if(0==l)break;else if(128>l)a[e]=String.fromCharCode(l);else if(194<=l&&224>l){var g=d[b++];a[e]=String.fromCharCode(((l&31)<<6)+(g&63))}else if(224<=l&&240>l){var g=d[b++],f=d[b++];a[e]=String.fromCharCode(((l&
255)<<12)+((g&63)<<6)+(f&63))}else if(240<=l&&245>l){var g=d[b++],f=d[b++],k=d[b++],l=((l&7)<<18)+((g&63)<<12)+((f&63)<<6)+(k&63)-65536;a[e]=String.fromCharCode((l>>10)+55296,(l&1023)+56320)}}return new h(a.join(""),b)},readNullTerminatedString:function(d,c){var b=[];c=c||d.length;for(var a=0;a<c;){var e=d[a++];if(0==e)break;b[a-1]=String.fromCharCode(e)}return new h(b.join(""),a)}}},{}],14:[function(f,k,n){function m(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var h=function(){function c(b,a){for(var c=0;c<a.length;c++){var d=a[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,a,e){a&&c(b.prototype,a);e&&c(b,e);return b}}(),d=f("./ChunkedFileData");n=function(c){function b(a){if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var c;c=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c._url=a;c._fileData=new d;return c}m(b,c);h(b,[{key:"_init",value:function(a){b._config.avoidHeadRequests?this._fetchSizeWithGetRequest(a):this._fetchSizeWithHeadRequest(a)}},{key:"_fetchSizeWithHeadRequest",value:function(a){var b=
this;this._makeXHRRequest("HEAD",null,{onSuccess:function(c){(c=b._parseContentLength(c))?(b._size=c,a.onSuccess()):b._fetchSizeWithGetRequest(a)},onError:a.onError})}},{key:"_fetchSizeWithGetRequest",value:function(a){var b=this,c=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",c,{onSuccess:function(c){var d=b._parseContentRange(c);c=b._getXhrResponseContent(c);if(d){if(null==d.instanceLength){b._fetchEntireFile(a);return}b._size=d.instanceLength}else b._size=c.length;b._fileData.addData(0,
c);a.onSuccess()},onError:a.onError})}},{key:"_fetchEntireFile",value:function(a){var b=this;this._makeXHRRequest("GET",null,{onSuccess:function(c){c=b._getXhrResponseContent(c);b._size=c.length;b._fileData.addData(0,c);a.onSuccess()},onError:a.onError})}},{key:"_getXhrResponseContent",value:function(a){return a.responseBody||a.responseText||""}},{key:"_parseContentLength",value:function(a){a=this._getResponseHeader(a,"Content-Length");return null==a?a:parseInt(a,10)}},{key:"_parseContentRange",value:function(a){if(a=
this._getResponseHeader(a,"Content-Range")){var b=a.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!b)throw Error("FIXME: Unknown Content-Range syntax: "+a);return{firstBytePosition:parseInt(b[1],10),lastBytePosition:parseInt(b[2],10),instanceLength:b[3]?parseInt(b[3],10):null}}return null}},{key:"loadRange",value:function(a,b){var c=this;c._fileData.hasDataRange(a[0],Math.min(c._size,a[1]))?setTimeout(b.onSuccess,1):(a=this._roundRangeToChunkMultiple(a),a[1]=Math.min(c._size,a[1]),this._makeXHRRequest("GET",
a,{onSuccess:function(d){d=c._getXhrResponseContent(d);c._fileData.addData(a[0],d);b.onSuccess()},onError:b.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(a){var b=1024*Math.ceil((a[1]-a[0]+1)/1024);return[a[0],a[0]+b-1]}},{key:"_makeXHRRequest",value:function(a,c,d){var g=this._createXHRObject();g.open(a,this._url);var f=function(){if(200===g.status||206===g.status)d.onSuccess(g);else if(d.onError)d.onError({type:"xhr",info:"Unexpected HTTP status "+g.status+".",xhr:g});g=null};"undefined"!==
typeof g.onload?(g.onload=f,g.onerror=function(){if(d.onError)d.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:g})}):g.onreadystatechange=function(){4===g.readyState&&f()};b._config.timeoutInSec&&(g.timeout=1E3*b._config.timeoutInSec,g.ontimeout=function(){if(d.onError)d.onError({type:"xhr",info:"Timeout after "+g.timeout/1E3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:g})});g.overrideMimeType("text/plain; charset=x-user-defined");c&&this._setRequestHeader(g,"Range",
"bytes="+c[0]+"-"+c[1]);this._setRequestHeader(g,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT");g.send(null)}},{key:"_setRequestHeader",value:function(a,c,d){0>b._config.disallowedXhrHeaders.indexOf(c.toLowerCase())&&a.setRequestHeader(c,d)}},{key:"_hasResponseHeader",value:function(a,b){var c=a.getAllResponseHeaders();if(!c)return!1;for(var c=c.split("\r\n"),d=[],f=0;f<c.length;f++)d[f]=c[f].split(":")[0].toLowerCase();return 0<=d.indexOf(b.toLowerCase())}},{key:"_getResponseHeader",value:function(a,
b){return this._hasResponseHeader(a,b)?a.getResponseHeader(b):null}},{key:"getByteAt",value:function(a){return this._fileData.getByteAt(a).charCodeAt(0)&255}},{key:"_isWebWorker",value:function(){return"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"===typeof window&&!this._isWebWorker())return new (f("xhr2").XMLHttpRequest);if("undefined"!==typeof XMLHttpRequest)return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported");
}}],[{key:"canReadFile",value:function(a){return"string"===typeof a&&/^[a-z]+:\/\//i.test(a)}},{key:"setConfig",value:function(a){for(var b in a)a.hasOwnProperty(b)&&(this._config[b]=a[b]);a=this._config.disallowedXhrHeaders;for(b=0;b<a.length;b++)a[b]=a[b].toLowerCase()}}]);return b}(f("./MediaFileReader"));n._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30};k.exports=n},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(f,k,n){function m(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function h(a,b){var c=0>a.offset&&(-a.offset>b||0<a.offset+a.length);return!(0<=a.offset&&a.offset+a.length>=b||c)}var d=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();f("./MediaFileReader");n=f("./NodeFileReader");var c=f("./XhrFileReader"),b=
f("./BlobFileReader"),a=f("./ArrayFileReader");f("./MediaTagReader");var e=f("./ID3v1TagReader"),l=f("./ID3v2TagReader"),g=f("./MP4TagReader");f=f("./FLACTagReader");var t=[],u=[],A=function(){function a(b){m(this,a);this._file=b}d(a,[{key:"setTagsToRead",value:function(a){this._tagsToRead=a;return this}},{key:"setFileReader",value:function(a){this._fileReader=a;return this}},{key:"setTagReader",value:function(a){this._tagReader=a;return this}},{key:"read",value:function(a){var b=new (this._getFileReader())(this._file),
c=this;b.init({onSuccess:function(){c._getTagReader(b,{onSuccess:function(d){(new d(b)).setTagsToRead(c._tagsToRead).read(a)},onError:a.onError})},onError:a.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var a=0;a<t.length;a++)if(t[a].canReadFile(this._file))return t[a];throw Error("No suitable file reader found for "+this._file);}},{key:"_getTagReader",value:function(a,b){if(this._tagReader){var c=
this._tagReader;setTimeout(function(){b.onSuccess(c)},1)}else this._findTagReader(a,b)}},{key:"_findTagReader",value:function(a,b){for(var c=[],d=[],e=a.getSize(),g=0;g<u.length;g++){var f=u[g].getTagIdentifierByteRange();h(f,e)&&(0<=f.offset&&f.offset<e/2||0>f.offset&&f.offset<-e/2?c.push(u[g]):d.push(u[g]))}var l=!1,g={onSuccess:function(){if(l){for(var c=0;c<u.length;c++){var d=u[c].getTagIdentifierByteRange();if(h(d,e)){try{var g=a.getBytesAt(0<=d.offset?d.offset:d.offset+e,d.length)}catch(f){if(b.onError)b.onError({type:"fileReader",
info:f.message});return}if(u[c].canReadTagFormat(g)){b.onSuccess(u[c]);return}}}if(b.onError)b.onError({type:"tagFormat",info:"No suitable tag found"})}else l=!0},onError:b.onError};this._loadTagIdentifierRanges(a,c,g);this._loadTagIdentifierRanges(a,d,g)}},{key:"_loadTagIdentifierRanges",value:function(a,b,c){if(0===b.length)setTimeout(c.onSuccess,1);else{for(var d=[Number.MAX_VALUE,0],e=a.getSize(),g=0;g<b.length;g++){var f=b[g].getTagIdentifierByteRange(),l=0<=f.offset?f.offset:f.offset+e,f=l+
f.length-1;d[0]=Math.min(l,d[0]);d[1]=Math.max(f,d[1])}a.loadRange(d,c)}}}]);return a}(),s=function(){function a(){m(this,a)}d(a,null,[{key:"addFileReader",value:function(b){t.push(b);return a}},{key:"addTagReader",value:function(b){u.push(b);return a}},{key:"removeTagReader",value:function(b){b=u.indexOf(b);0<=b&&u.splice(b,1);return a}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){c.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(a){c.setConfig({disallowedXhrHeaders:a})}},
{key:"setXhrTimeoutInSec",value:function(a){c.setConfig({timeoutInSec:a})}}]);return a}();s.addFileReader(c).addFileReader(b).addFileReader(a).addTagReader(l).addTagReader(e).addTagReader(g).addTagReader(f);"undefined"===typeof process||process.browser||s.addFileReader(n);k.exports={read:function(a,b){(new A(a)).read(b)},Reader:A,Config:s}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,
"./NodeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)});
!function(p,f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define(f):p.ID3Writer=f()}(this,function(){function p(d){return String(d).split("").map(function(c){return c.charCodeAt(0)})}function f(d){return new Uint8Array(p(d))}function k(d){var c=new Uint8Array(2*d.length);return(new Uint16Array(c.buffer)).set(p(d)),c}function n(d){if(!d||!d.length)return null;if(255===d[0]&&216===d[1]&&255===d[2])return"image/jpeg";if(137===d[0]&&80===
d[1]&&78===d[2]&&71===d[3])return"image/png";if(71===d[0]&&73===d[1]&&70===d[2])return"image/gif";if(87===d[8]&&69===d[9]&&66===d[10]&&80===d[11])return"image/webp";if(66===d[0]&&77===d[1])return"image/bmp";var c=77===d[0]&&77===d[1]&&0===d[2]&&42===d[3];return 73===d[0]&&73===d[1]&&42===d[2]&&0===d[3]||c?"image/tiff":66===d[0]&&77===d[1]?"image/bmp":0===d[0]&&0===d[1]&&1===d[2]&&0===d[3]?"image/x-icon":null}function m(d){return[d>>>21&127,d>>>14&127,d>>>7&127,127&d]}function h(d,c,b,a){return 11+
c+1+1+(a?2+2*(b+1):b+1)+d}return function(){function d(c){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");if(!(c&&"object"==typeof c&&"byteLength"in c))throw Error("First argument should be an instance of ArrayBuffer or Buffer");this.arrayBuffer=c;this.padding=4096;this.frames=[];this.url=""}return d.prototype._setIntegerFrame=function(c,b){var a=parseInt(b,10);this.frames.push({name:c,value:a,size:11+a.toString().length})},d.prototype._setStringFrame=function(c,b){var a=
b.toString();this.frames.push({name:c,value:a,size:13+2*a.length})},d.prototype._setPictureFrame=function(c,b,a,d){var f=n(new Uint8Array(b)),g=a.toString();if(!f)throw Error("Unknown picture MIME type");a||(d=!1);this.frames.push({name:"APIC",value:b,pictureType:c,mimeType:f,useUnicodeEncoding:d,description:g,size:h(b.byteLength,f.length,g.length,d)})},d.prototype._setLyricsFrame=function(c,b){var a=c.toString(),d=b.toString();this.frames.push({name:"USLT",value:d,description:a,size:2*a.length+20+
2*d.length})},d.prototype._setCommentFrame=function(c,b){var a=c.toString(),d=b.toString();this.frames.push({name:"COMM",value:d,description:a,size:2*a.length+20+2*d.length})},d.prototype._setUserStringFrame=function(c,b){var a=c.toString(),d=b.toString();this.frames.push({name:"TXXX",description:a,value:d,size:2*a.length+17+2*d.length})},d.prototype._setUrlLinkFrame=function(c,b){var a=b.toString();this.frames.push({name:c,value:a,size:10+a.length})},d.prototype.setFrame=function(c,b){switch(c){case "TPE1":case "TCOM":case "TCON":if(!Array.isArray(b))throw Error(c+
" frame value should be an array of strings");var a=b.join("TCON"===c?";":"/");this._setStringFrame(c,a);break;case "TIT2":case "TALB":case "TPE2":case "TPE3":case "TPE4":case "TRCK":case "TPOS":case "TMED":case "TPUB":this._setStringFrame(c,b);break;case "TBPM":case "TLEN":case "TYER":this._setIntegerFrame(c,b);break;case "USLT":if(!("object"==typeof b&&"description"in b&&"lyrics"in b))throw Error("USLT frame value should be an object with keys description and lyrics");this._setLyricsFrame(b.description,
b.lyrics);break;case "APIC":if(!("object"==typeof b&&"type"in b&&"data"in b&&"description"in b))throw Error("APIC frame value should be an object with keys type, data and description");if(0>b.type||20<b.type)throw Error("Incorrect APIC frame picture type");this._setPictureFrame(b.type,b.data,b.description,!!b.useUnicodeEncoding);break;case "TXXX":if(!("object"==typeof b&&"description"in b&&"value"in b))throw Error("TXXX frame value should be an object with keys description and value");this._setUserStringFrame(b.description,
b.value);break;case "TKEY":if(!/^([A-G][#b]?m?|o)$/.test(b))throw Error(c+" frame value should be like Dbm, C#, B or o");this._setStringFrame(c,b);break;case "WCOM":case "WCOP":case "WOAF":case "WOAR":case "WOAS":case "WORS":case "WPAY":case "WPUB":this._setUrlLinkFrame(c,b);break;case "COMM":if(!("object"==typeof b&&"description"in b&&"text"in b))throw Error("COMM frame value should be an object with keys description and text");this._setCommentFrame(b.description,b.text);break;default:throw Error("Unsupported frame "+
c);}return this},d.prototype.removeTag=function(){if(!(10>this.arrayBuffer.byteLength)){var c=new Uint8Array(this.arrayBuffer),b=c[3],a=[c[6],c[7],c[8],c[9]],a=(a[0]<<21)+(a[1]<<14)+(a[2]<<7)+a[3]+10;73!==c[0]||68!==c[1]||51!==c[2]||2>b||4<b||(this.arrayBuffer=(new Uint8Array(c.subarray(a))).buffer)}},d.prototype.addTag=function(){this.removeTag();var c=[255,254],b=[101,110,103],a=10+this.frames.reduce(function(a,b){return a+b.size},0)+this.padding,d=new ArrayBuffer(this.arrayBuffer.byteLength+a),
l=new Uint8Array(d),g=0,h=[];return h=[73,68,51,3],l.set(h,g),g+=h.length,g++,g++,h=m(a-10),l.set(h,g),g+=h.length,this.frames.forEach(function(a){h=f(a.name);l.set(h,g);g+=h.length;var d=a.size-10;switch(h=[d>>>24&255,d>>>16&255,d>>>8&255,255&d],l.set(h,g),g+=h.length,g+=2,a.name){case "WCOM":case "WCOP":case "WOAF":case "WOAR":case "WOAS":case "WORS":case "WPAY":case "WPUB":h=f(a.value);l.set(h,g);g+=h.length;break;case "TPE1":case "TCOM":case "TCON":case "TIT2":case "TALB":case "TPE2":case "TPE3":case "TPE4":case "TRCK":case "TPOS":case "TKEY":case "TMED":case "TPUB":h=
[1].concat(c);l.set(h,g);g+=h.length;h=k(a.value);l.set(h,g);g+=h.length;break;case "TXXX":case "USLT":case "COMM":h=[1];"USLT"!==a.name&&"COMM"!==a.name||(h=h.concat(b));h=h.concat(c);l.set(h,g);g+=h.length;h=k(a.description);l.set(h,g);g+=h.length;h=[0,0].concat(c);l.set(h,g);g+=h.length;h=k(a.value);l.set(h,g);g+=h.length;break;case "TBPM":case "TLEN":case "TYER":g++;h=f(a.value);l.set(h,g);g+=h.length;break;case "APIC":h=[a.useUnicodeEncoding?1:0],l.set(h,g),g+=h.length,h=f(a.mimeType),l.set(h,
g),g+=h.length,h=[0,a.pictureType],l.set(h,g),g+=h.length,a.useUnicodeEncoding?(h=[].concat(c),l.set(h,g),g+=h.length,h=k(a.description),l.set(h,g),g+=h.length,g+=2):(h=f(a.description),l.set(h,g),g+=h.length,g++),l.set(new Uint8Array(a.value),g),g+=a.value.byteLength}}),g+=this.padding,l.set(new Uint8Array(this.arrayBuffer),g),this.arrayBuffer=d,d},d.prototype.getBlob=function(){return new Blob([this.arrayBuffer],{type:"audio/mpeg"})},d.prototype.getURL=function(){return this.url||(this.url=URL.createObjectURL(this.getBlob())),
this.url},d.prototype.revokeURL=function(){URL.revokeObjectURL(this.url)},d}()});
function proc_download(p,f,k,n){var m={};gd_lastprogress=(new Date).getTime();try{var h=new XMLHttpRequest,d=_getid("u_cancel");d&&(d.style.display="",d.onclick=function(){h.abort();m.error="Canceled by user.";m.canceled=!0;k&&k(m);return!1});h.open("GET",p.split("&access_token=")[0]);h.responseType="blob";h.onprogress=function(b){if(gd_lastprogress){var a=new Date;if(300>a.getTime()-gd_lastprogress)return;gd_lastprogress=a.getTime()}if(b){var a=b.totalSize||f||b.total||0,c=b.position||b.loaded||
0;if(b=_getid("u_progress"))a="Downloading... ("+number_format(c)+"/"+number_format(a)+")",n&&(a=n+" "+a),b.innerHTML=a}};p.split("&access_token=")[1]&&h.setRequestHeader("Authorization","Bearer "+p.split("&access_token=")[1]);h.onload=function(){200==this.status||206==this.status?m.blob=this.response:m.error="Error (status) "+this.status+"("+this.statusText+") occurred while receiving the file.";k&&k(m)};h.onerror=function(b){m.error="Error "+b.target.status+" occurred while receiving the file.";
k&&k(m)};h.send()}catch(c){m.error=c+" or This browser does not support. Please upgrade your browser.",k&&k(m)}}
function proc_check2(){function p(){u_working=!1;_getid("downlink").innerHTML=""}function f(a){proc_log(a+" "+h.filename,"error")}function k(a){var b=_getid("u_progress");b&&(b.innerHTML=henc(a))}function n(){function a(){proc_formclear();cgresp=h;_getid("cfilename").innerHTML="Filename: "+henc(h.filename);_getid("btn_save").disabled=!1;_getid("msg4").innerHTML="";d++;m()}jsmediatags.read(fileblob,{onSuccess:function(b){function c(a){for(var d in b.tags)if(b.tags[d].description&&b.tags[d].description.toLowerCase()==
a)return b.tags[d].data}function k(a){if(0===a||"0"===a)return"0";if(!a)return"";try{if(a+="",p){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);var d=p.decode(b);d&&(a=d)}}catch(e){}return trim(a)}if(b&&b.tags){var n=_getid("c_encoding").value,p="";if(n&&"UTF-8"!=n)try{p=new TextDecoder(n)}catch(s){p=""}n=document.optcontainer;n.o_title.value=k(b.tags.title||"");n.o_artist.value=k(b.tags.artist||"");n.o_composer.value=k(c("composer")||"");n.o_genre.value=k(b.tags.genre||
"");n.o_album.value=k(b.tags.album||"");n.o_albumartist.value=k(c("band/orchestra/accompaniment")||"");n.o_track.value=k(b.tags.track||"");n.o_disknumber.value=k(c("part of a set")||"");n.o_year.value=k(b.tags.year||"0");n.o_labelname.value=k(c("publisher")||"");n.o_lyrics.value=b.tags.lyrics?k(b.tags.lyrics.lyrics||""):"";b.tags.picture&&b.tags.picture.data?(n=new Uint8Array(b.tags.picture.data),n=new Blob([n],{type:b.tags.picture.format||"image/jpeg"}),coverbloburl&&window.URL.revokeObjectURL(coverbloburl),
coverbloburl=window.URL.createObjectURL(n),_getid("o_cover").src=coverbloburl,_getid("o_cover").style.display=""):(_getid("o_cover").src="",_getid("o_cover").style.display="none");cgresp=h;_getid("cfilename").innerHTML="Filename: "+henc(h.filename);_getid("btn_save").disabled=!1;_getid("msg4").innerHTML="";d++;m()}else f("Unknown Error, or No suitable tag found, Create a new tag."),a()},onError:function(b){var c="Unknown Error, or No suitable tag found";b&&b.info&&(c=b.info);f(c+", Create a new tag.");
a()}})}function m(){if(d>c.length-1)p();else if(h=c[d],k(h.filename),h.size>1048576*g_maxsize)f("The file size is too large to load. ("+g_maxsize+" MB limit)"),d++,m();else if(h.f)fileblob=h.blob||h.f,n();else if(h.blob)fileblob=h.blob,n();else{var a=h.link3||h.link;_getid("downlink").innerHTML="<table><tr><td><a href='#' id='u_cancel' style='font-size:14px;display:none'>Cancel</a>&nbsp; <td><img src='images/wait.gif' align='absmiddle'><td><div id='u_progress'>Processing...</div></table>";proc_download(a,
h.size,function(a){a.error?a.canceled?(p(),_getid("downlink").innerHTML=henc(a.error)):(f(a.error),d++,m()):a.blob?(fileblob=a.blob,h.blob=a.blob,n()):(f("Unknown Error."),d++,m())},"")}}if(window.URL&&window.FileReader)if(u_working)alert("It's working. Please try again later.");else{for(var h,d,c=[],b=_getid("attachment"),a=b.options.length-1;0<=a;a--)if(b.options[a].selected){cl_files[b.options[a].value]&&c.push(cl_files[b.options[a].value]);break}0==cl_files.length||0==c.length?alert("Please select MP3 files."):
(_getid("downlink").innerHTML="",_getid("downlink2").innerHTML="",u_working=!0,d=0,m())}else alert("This browser does not support. Please upgrade your browser.")}
function proc_formclear(){var p=document.optcontainer;p.o_title.value="";p.o_artist.value="";p.o_composer.value="";p.o_genre.value="";p.o_album.value="";p.o_albumartist.value="";p.o_track.value="";p.o_disknumber.value="";p.o_year.value="0";p.o_labelname.value="";p.o_lyrics.value="";_getid("o_cover").src="";_getid("o_cover").style.display="none"}
function proc_savepc(p,f){var k;k=1==f?cgresp:gresp;if(!k||!k.blob||!k.newbloburl)return!1;if(navigator.msSaveBlob)return navigator.msSaveBlob(k.blob,k.filename),!1;p.download=k.filename;if(issafari)return window.open(k.newbloburl),!1;p.target="_blank";p.href=k.newbloburl}
function proc_savedrive(p){var f=[];if("all"==p){for(p=0;p<=cl_files.length-1;p++)cl_files[p].blob&&cl_files[p].newbloburl&&f.push({filename:cl_files[p].filename,bloburl:cl_files[p].newbloburl,mimeType:"audio/mpeg",size:cl_files[p].blob.size});0==f.length?alert("No files to be saved. First, Edit the tag of the file."):proc_saver(f)}else{p=1==p?cgresp:gresp;if(!p||!p.blob||!p.newbloburl)return!1;f.push({filename:p.filename,bloburl:p.newbloburl,mimeType:"audio/mpeg",size:p.blob.size});proc_saver(f)}}
function proc_usethis(){var p=_getid("o_cover_sel");0<p.files.length&&(p=p.files[0],0==p.size?(alert("Cover file size is zero. or File not found."),this.value=""):(coverbloburl&&window.URL.revokeObjectURL(coverbloburl),coverbloburl=window.URL.createObjectURL(p),_getid("o_cover").src=coverbloburl,_getid("o_cover").style.display=""))}function proc_coverclear(){_getid("o_cover").src="";_getid("o_cover").style.display="none"}
function proc_savetag(){function p(f){function k(){h.addTag();var a=h.getBlob();cgresp.blob=a;cgresp.newbloburl&&window.URL.revokeObjectURL(cgresp.newbloburl);cgresp.newbloburl=window.URL.createObjectURL(a);_getid("msg4").innerHTML='<a href="#" onclick="return proc_savepc(this,1)">Save to Computer</a> &nbsp;<a href="#" onclick="proc_savedrive(1);return false">Save to Google Drive</a> &nbsp;<a href="#" onclick="proc_gview(1);return false" title="Play this file">Play</a>';attachment_onchange();_getid("btn_saveall").disabled=
!1}var h=new ID3Writer(f);f="o_title o_album o_albumartist o_track o_disknumber o_year o_lyrics o_labelname".split(" ");for(var d="TIT2 TALB TPE2 TRCK TPOS TYER USLT TPUB".split(" "),c=["o_artist","o_composer","o_genre"],b=["TPE1","TCOM","TCON"],a=document.optcontainer,e,l=0;l<=f.length-1;l++)"USLT"==d[l]?h.setFrame("USLT",{description:"",lyrics:a[f[l]].value||""}):(e=a[f[l]].value||"","TYER"==d[l]&&(e=parseInt(e),!e||isNaN(e))&&(e=0),h.setFrame(d[l],e));for(l=0;l<=c.length-1;l++)h.setFrame(b[l],
(a[c[l]].value||"").split(";"));(f=_getid("o_cover").src)&&0==f.toLowerCase().indexOf("blob")?(d=new XMLHttpRequest,d.open("GET",f),d.responseType="arraybuffer",d.onload=function(){h.setFrame("APIC",{type:3,data:this.response,description:""});k()},d.onerror=function(a){alert("Cover File Read Error.")},d.send()):k()}_getid("msg4").innerHTML="";if(cgresp){var f=cgresp.f||cgresp.blob;if(f)if(0==f.size)alert("File size is zero. or File not found.");else{var k=new FileReader;k.onload=function(){p(k.result)};
k.onerror=function(){alert("File Read Error: "+k.error)};k.readAsArrayBuffer(f)}else alert("No file read with tag.")}else alert("No file read with tag.")}function proc_imgerr(p){p.onerror=null;p.src="images/noimage.jpg"};
